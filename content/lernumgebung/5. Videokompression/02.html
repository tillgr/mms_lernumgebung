---
title: "5.2 Digitale Videotechnik"
date: 2020-10-12T09:49:44+02:00
draft: false
---

<h2>5.2.1 Digitalisierung analoger Video-Signale</h2>
<p>Am Eingang liegen analoge {{< formula >}}R{{< /formula >}}, {{< formula >}}G{{< /formula >}},
    {{< formula >}}B{{< /formula >}} Farbwertsignale (z.B. einer Kamera) an, welche in eine Luminanz- und zwei
    Chrominanzkomponenten {{< formula >}}Y = f(R,G,B){{< /formula >}}, {{< formula >}}C_B f(Y,B){{< /formula >}} und
    {{< formula >}}C_R = f(Y,R){{< /formula >}} überführt werden.
</p>
<p>
    {{< formula >}}
    \begin{pmatrix}
    Y \\
    C_B \\
    C_R
    \end{pmatrix} = \begin{pmatrix}
    0,299 & 0,587 & 0,114 \\
    -0,1687 & -0,3313 & 0,5 \\
    0,5 & -0,4187 & -0,0813
    \end{pmatrix}\begin{pmatrix}
    R \\
    G \\
    B
    \end{pmatrix}
    {{< /formula >}}
</p>

<p>Es folgt die <strong>A/D-Wandlung</strong> (Abtastung) in digitale Komponentensignale
    {{< formula >}}Y{{< /formula >}}, {{< formula >}}C_B{{< /formula >}}, {{< formula >}}C_R{{< /formula >}}.
    Die genormte Abtastfrequenz (ITU 601) für {{< formula >}}R{{< /formula >}}-, {{< formula >}}G{{< /formula >}}-,
    {{< formula >}}B{{< /formula >}}- oder {{< formula >}}Y{{< /formula >}}-Basisbandsignale beträgt 13,5 MHz.
    Die Quantisierung erfolgt mit {{< formula >}}b = 8{{< /formula >}} Bit, woraus eine Bandbreite von
    <strong>108 Mbit/s</strong> für jedes Signal resultiert.
</p><!--TODO: Formatierung-->
<p>A/D-Wandlung: Das analoge Eingangssignal {{< formula >}}u(t){{< /formula >}} wird einer Kette von
    {{< formula >}}2^b - 1{{< /formula >}} Komparatoren zugeführt, die ihre Vergleichspannung von einem Spannungsteiler
    erhalten. Die {{< formula >}}2^b - 1{{< /formula >}} Ausgangswerte der Komparatoren repräsentieren den digitalen
    Wert, der durch den Koder in einen Binärcode mit {{< formula >}}b{{< /formula >}} Bits umgesetzt wird. Für
    Chrominanz-Signale {{< formula >}}C_B{{< /formula >}} und {{< formula >}}C_R{{< /formula >}} halbiert sich die
    Abtast- und Datenrate auf <strong>6,75 MHz</strong> bzw. <strong>54 Mbit/s</strong>. Die Datenrate für
    RGB-Übertragung (4:4:4 Format) beträgt damit 324 Mbit/s, für {{< formula >}}Y C_B C_R{{< /formula >}}-Übertragung
    (4:2:2) <strong>216 Mbit/s</strong>.</p><!--TODO: Formatierung-->
{{% image url = "Videokompression/2/4_2_1_analog-digital-wandlung.gif"
alt = "Analog/Digital-wandlung"
caption = "Abb. 5.2-0 Analog/Digital-wandlung" %}}

<p>
  Die Bildung des <strong>Zeitmultiplexsignals</strong> erfolgt über
  bitparallele Aufteilung des Signals auf N Leitungen, welches über einen
  Wandler am Ausgang seriell als digitales, serielles Komponentensignal DSC
  (Digital SerialComponents) mit 270 Mbps anliegt.
</p>

<h3 class="h5">Abtastformate</h3>
<p>Die angegebenen Verhältnisse besagen die Zuordnung der Chrominanz- Abtastung {{< formula >}}C_B{{< /formula >}} und
    {{< formula >}}C_R{{< /formula >}} zu den {{< formula >}}Y{{< /formula >}}-Abtastwerten
    ({{< formula >}}Y{{< /formula >}}: {{< formula >}}C_B{{< /formula >}}:{{< formula >}}C_R{{< /formula >}}), und
    beziehen sich auf den Basiswert<strong>3,375 MHz</strong>; 4:2:2 bedeutet Abtastung von Y mit
    {{< formula >}}4 \times 3,375 \text{MHz} = 13,5 \text{MHz}{{< /formula >}} und {{< formula >}}C_B{{< /formula >}}
    sowie {{< formula >}}C_R{{< /formula >}} mit jeweils
    {{< formula >}}2 \times 3,375 \text{MHz} = 6,75 \text{MHz}{{< /formula >}}. Die Abtastwerte beziehen sich auf das
    aktuelle Bild mit {{< formula >}}n{{< /formula >}} Pixel pro Zeile und {{< formula >}}z{{< /formula >}} aktiven
    Zeilen, bei entweder progressiver Abtastung als Vollbild oder Zeilensprungabtastung in 2 Halbbildern.</p><!--TODO: Formatierung-->
<p>Durch starre Kopplung der Abtastfrequenz mit der Zeilenfrequenz (15,625 KHz bei 625 / 15,734 KHz bei 525 Zeilen)
    entsteht ein orthogonales Abtastraster, auf dem die Pixel genau übereinander liegen, je Teilbild an gleicher
    Stelle.</p>

<p><strong>4:4:4-Format:</strong></p>
<p>
  Die Datenrate für RGB-Übertragung (4:4:4 Format) beträgt 324 Mbit/s. Anwendung
  dieses Verfahrens in der Bildbearbeitung und z.B. in der Medizintechnik; nicht
  jedoch für TV.
</p>
<!--TODO: Formatierung-->

<p><strong>4:2:2-Format:</strong></p>
<p>Für Chrominanz-Signale {{< formula >}}C_B{{< /formula >}} und {{< formula >}}C_R{{< /formula >}} halbiert sich die
    Abtast- und Datenrate auf <strong>6,75 MHz</strong> bzw. <strong>54 Mbit/s</strong>; resultierende Bandbreite der
    {{< formula >}}YC_BC_R{{< /formula >}} -Übertragung (4:2:2) <strong>216 Mbit/s</strong>. Anwendung findet dieses
    Verfahren im Fernseh- und Studiotechnik. Im Gegensatz zum 4:2:2-Studiosignal gibt es keinen
    4:2:0-Übertragungsstandard, weil dieser auf fiktive "Zwischenzeilen" zurückgreifen würde. Die Bildung des Signals
    erfolgt durch Berechnung der Chrominanzwerte (Formatkonversion).</p><!--TODO: Formatierung-->

<p><strong>4:1:1-Format:</strong></p>
<p>
  Hier wird die horizontale Chrominanz-Auflösung auf 25% reduziert. Anwendung
  z.B. bei Magnetbandaufzeichnung datenreduzierter Videosignale.
</p>
<!--TODO: Formatierung-->

<p><strong>4:2:0-Format:</strong></p>
<p>
  Die Reduzierung der Vertikalauflösung beim Halbbildverfahren führt zu
  sichtbarem Chrominanz-Zeilenflimmern. Um dies zu verhindern, wird aus 4
  Chrominanz-Abtastwerten der geometrisch übereinander liegenden Zeilen des 1.
  und 2. Halbbildes jeweils ein Mittelwert berechnet und den umgebenden Y-Werten
  zugeordnet.
</p>
<!--TODO: Formatierung-->
{{% image url="Videokompression/2/4-2-0-abtastung.gif"
alt="Raster bei der 4:2:0-Abtastung"
caption="Abb. 5.2-1 Raster bei der 4:2:0-Abtastung" %}}

<p><strong>SIF-Format:(Source Intermediate Format)</strong></p>
<p>
  Weitere Reduktion der spatialen (räumlichen) Auflösung auf die halbe Anzahl an
  Abtastwerten in Verbindung mit einer Reduktion der temporalen Auflösung (25 Hz
  bzw. 29,97 Hz). Beim SIF-Format ist die Chrominanz in beiden Richtungen
  unterabgetastet und die Abtastwerte liegen mittig zwischen den Abtastwerten
  der Luminanz.
</p>
<p>SIF-Formate für Multimedia-Anwendungen mit einer Auflösung beim</p>
<ul>
    <li>{{< formula >}}625{{< /formula >}} - Zeilensysteme: {{< formula >}} Y = 360 \times 288{{< /formula >}} Pixel,
        {{< formula >}}C_B{{< /formula >}} bzw. {{< formula >}}C_R = 180 \times 144{{< /formula >}} Pixel
    </li>
    <li>{{< formula >}}525{{< /formula >}} - Zeilensysteme: {{< formula >}} Y = 360 \times 240{{< /formula >}} Pixel,
        {{< formula >}}C_B{{< /formula >}} bzw. {{< formula >}}C_R = 180 \times 120{{< /formula >}} Pixel
    </li>
</ul>

<table
class="table table-bordered"
>
  <tbody>
    <tr>
      <th>Abtastung</th>

      <th colspan="2">Y-Signal</th>

      <th colspan="2">
        C<span class="tiefgestellt">B</span>-, C<span class="tiefgestellt"
          >R</span
        >-Signal
      </th>

      <th>Anwendung</th>
    </tr>

    <tr>
      <td>&nbsp;</td>
      <td>horizontal</td>
      <td>vertikal</td>
      <td>horizontal</td>
      <td>vertikal</td>
      <td>&nbsp;</td>
    </tr>

    <tr>
      <td>4:4:4</td>
      <td>100%</td>
      <td>100%</td>
      <td>100%</td>
      <td>100%</td>
      <td>
        <div>Bildbearbeitung; Medizintechnik</div>
      </td>
    </tr>

    <tr>
      <td>4:2:2</td>
      <td>100%</td>
      <td>100%</td>
      <td>50%</td>
      <td>100%</td>
      <td>
        <div>Fernsehtschnik, Studio</div>
      </td>
    </tr>

    <tr>
      <td>4:1:1</td>
      <td>100%</td>
      <td>100%</td>
      <td>25%</td>
      <td>100%</td>
      <td>
        <div>Datenreduzierte MAZ</div>
      </td>
    </tr>

    <tr>
      <td>4:2:0</td>
      <td>100%</td>
      <td>100%</td>
      <td>50%</td>
      <td>50%</td>
      <td>
        <div>???</div>
      </td>
    </tr>

    <tr>
      <td>SIF</td>
      <td>?</td>
      <td>?</td>
      <td>?</td>
      <td>?</td>
      <td>
        <div>???</div>
      </td>
    </tr>
  </tbody>
</table>

<p><strong>Digitale Studionorm ITU-R BT.601 bzw. CCIR 601</strong></p>
<p>ITU: International Telecommunication Union;</p>
<p>CCIR: Consultative Committee for International Radio</p>
<p>Die "Recommendation 601: Encoding Parameter of Digital TV for Studios" normiert digitale Videosignale für Studios.
    Für das amerikanische (525-Zeilen/60 Hz) und europäische (625/50) TV-System gelten weitgehend gemeinsame Parameter.
    Codiert werden gammakorrigierte Quellsignale {{< formula >}}A_Y{{< /formula >}},
    {{< formula >}}A_{B-Y}{{< /formula >}} und {{< formula >}}A_{R-Y}{{< /formula >}} bzw.
    {{< formula >}}A_R{{< /formula >}}, {{< formula >}}A_G{{< /formula >}} und {{< formula >}}A_B{{< /formula >}}. Die
    Spannung von {{< formula >}}A_Y{{< /formula >}} wird auf 0 bis 1,0 Volt (praktisch 0 bis 700 mV), die von
    {{< formula >}}A_{B-Y}{{< /formula >}} und {{< formula >}}A_{R-Y}{{< /formula >}} auf -0,5 bis +0,5 Volt (bzw. -350
    mV bis +350 mV) festgelegt.
</p><!--TODO: Formatierung-->

<table
class="table table-bordered"
>
  <tbody>
    <tr style="text-align: center">
      <td colspan="2"></td>
      <td>525 Zeilen/60 Hz</td>
      <td>625 Zeilen/50 Hz</td>
    </tr>

    <tr style="text-align: center">
      <td colspan="2" style="text-align: left">Zeilendauer</td>
      <td>63,55 µs</td>
      <td>64 µs</td>
    </tr>

    <tr style="text-align: center">
      <td rowspan="2" style="text-align: left">Abtastwerte über Zeilendauer</td>
      <td>Y</td>
      <td>858</td>
      <td>864</td>
    </tr>

    <tr style="text-align: center">
      <td>C<sub>R</sub>, C<sub>B</sub></td>
      <td>429</td>
      <td>432</td>
    </tr>

    <tr style="text-align: center">
      <td rowspan="2" style="text-align: left">Abtastfrequenz</td>
      <td>Y</td>
      <td colspan="2">13,5 MHz</td>
    </tr>

    <tr style="text-align: center">
      <td>C<sub>R</sub>, C<sub>B</sub></td>
      <td colspan="2">6,75 MHz</td>
    </tr>

    <tr style="text-align: center">
      <td rowspan="2" style="text-align: left">
        Zahl der Abtastwerte pro aktiver Zeile
      </td>
      <td>Y</td>
      <td colspan="2">720</td>
    </tr>

    <tr style="text-align: center">
      <td>C<sub>R</sub>, C<sub>B</sub></td>
      <td colspan="2">360</td>
    </tr>

    <tr style="text-align: center">
      <td colspan="2" style="text-align:left" >Codierung</td>
      <td colspan="2">gleichmäßige Quantisierung mit 8 Bit</td>
    </tr>

    <tr style="text-align: center">
      <td rowspan="2" style="text-align: left">
        Bandbreitenbegrenzung
      </td>
      <td>Y</td>
      <td colspan="2">5,75 MHz</td>
    </tr>

    <tr style="text-align: center">
      <td>C<sub>R</sub>, C<sub>B</sub></td>
      <td colspan="2">2,75 MHz</td>
    </tr>
  </tbody>
</table>

<h2>5.2.2 Digitales Fernsehen</h2>
<p>
  Die Techniken des digitalen Fernsehens sind: DTVB (Digital TeleVision
  Broadcasting) bzw. DVB (Digital Video Broadcasting). Deren Ziel ist die
  Übertragung von digitalisierten Bild-, Ton- und Zusatzinformationen, die auf
  einem analogen Träger moduliert ausgestrahlt werden. Dazu werden
  Datencontainer benutzt. In ihnen wird eine maximale Datenmenge pro Zeiteinheit
  praktisch fehlerfrei übertragen, wobei die Art der Daten keine Rolle spielt,
  solange sie nach den Regeln des DVB-Standards verpackt und um Zusatzdaten,
  z.B. Synchronisationsinformationen, ergänzt wurden.
</p>
<p>DTVB ermöglicht die</p>
<ul>
  <li>
    Vervielfachung der in einem Übertragungskanal zu übertragenden TV-Programme.
  </li>
  <li>Übertragung digitaler Hörfunkprogramme.</li>
  <li>
    flexible Wahl der Bild- und Tonqualität, solange die Datenrate die
    Kanalkapazität nicht überschreitet.
  </li>
  <li>Unterstützung von Verschlüsselungsverfahren, z.B. für Pay per View.</li>
</ul>

<p>
  Die Übertragungsrate (Größe der Datencontainer) ist abhängig vom
  Übertragungsmedium. Bei Satellitenausstrahlung und Weiterverbreitung im
  Kabelnetz sind z.B. 40 Mbit/s möglich. Terrestrische Ausstrahlung gestattet 20
  Mbit/s. Beim digitalisierten Farbfernsehsignal (ITU-R 601) sind 216 Mbits/s
  möglich.
</p>
<p>Die Signale müssen komprimiert werden.</p>

<table
class="table table-bordered"
>
  <tbody>
    <tr>
      <th rowspan="2">Video-Signal</th>

      <th rowspan="2">Eingangs-Datenrate</th>

      <th colspan="5">Kompressionsrate</th>
    </tr>

    <tr>
      <th>S-ISDN (64 Kbps)</th>

      <th>CD-ROM (1,4 Mbps)</th>

      <th>Standard TV (5 Mbps)</th>

      <th>Enhanced TV (9 Mbps)</th>

      <th>HDTV (24Mbps)</th>
    </tr>

    <tr>
      <td>SIF (352 x 288 x 1:1)</td>

      <td>30 Mbit/s</td>

      <td>470 : 1</td>

      <td>30 : 1</td>

      <td>&nbsp;</td>

      <td>&nbsp;</td>

      <td>&nbsp;</td>
    </tr>

    <tr>
      <td>ITU-R 601 (720 x 576 x 2:1)</td>

      <td>166 Mbit/s</td>

      <td>&nbsp;</td>

      <td>&nbsp;</td>

      <td>33:1</td>

      <td>18:1</td>

      <td>&nbsp;</td>
    </tr>

    <tr>
      <td>HDTV (1440 x 1152 x 2:1)</td>

      <td>663 Mbit/s</td>

      <td>&nbsp;</td>

      <td>&nbsp;</td>

      <td>&nbsp;</td>

      <td>&nbsp;</td>

      <td>28:1</td>
    </tr>
  </tbody>
</table>

<p>Mögliche Übertragungswege für digitales Fernsehen sind:</p>
<ul>
  <li>Terrestrische Übertragung</li>
  <li>Übertragung per Satellit oder</li>
  <li>Übertragung im Kabel</li>
</ul>

<p>
  Bei terrestrischer Übertragung ist das Problem, dass die heute vom analogen
  Fernsehen belegten Kanäle nicht kurzfristig zur Nutzung durch DVB freigemacht
  werden können. Langfristig ist eine Umverteilung der Frequenzressourcen
  geplant.
</p>
<p>
  Das folgende Bild zeigt die Belegung des UHF-Bereiches (Ultra High Frequency,
  Kanäle 22 bis 69) in Europa mit Fernsehsendern.
</p>
{{% image url="Videokompression/2/4_2_2_uhf-bereich.gif"
alt="Belegung des UHF-Bereiches mit Fernsehsendern"
caption="Abb. 5.2-2 Belegung des UHF-Bereiches mit Fernsehsendern" %}}

<p>
  Bis zum Jahre 2008 werden die Kanäle ab Kanal 62 bis in allen Regionen für DVB
  zur Verfügung stehen. Bis 2020 sollen weitere Bereiche des UHF-Bereiches durch
  DVB belegt werden.
</p>
<p>
  Weniger problematisch als die terrestrische Übertragung ist die Übertragung
  per Satellit oder im Kabel. Deshalb steht die Übertragung per Satellit oder im
  Kabel im Mittelpunkt der Einführungsstrategie von DVB in Europa.
</p>
<p>Das folgende Bild zeigt ein mögliches Szenario:</p>
{{% image url="Videokompression/2/4_2_3_satellitenuebertragung.gif"
alt="Mögliches Szenario der Satellitenübertragung"
caption="Abb. 5.2-3 Mögliches Szenario der Satellitenübertragung" %}}

<p>
  Nach der Zusammenführung einzelner datenreduzierter Mediensignale zu den
  Programmen 1 bis n werden diese in einen Medienstrom (Datencontainer)
  vereinigt und nach geeigneter Verarbeitung dem Satelliten-Uplink zugeführt.
  Der Satellit verteilt diese an Direktempfangsanlagen, terrestrische Sender und
  Kabelkopfstationen. In der Kabelkopfstation werden die Signale demoduliert,
  dekodiert, die Programme evtl. innerhalb eines Containers neu zusammengestellt
  und mit dem für das Kabel spezifischen Modulationsverfahren weiterverteilt.
</p>

<h2>5.2.3 Videostandards im Computerbereich</h2>
<p>Bei der Videoverarbeitung im Rechner wird kein Zeilensprungverfahren angewandt (<strong>non-interlaced</strong>). Die
    Bildwiederholfrequenz {{< formula >}}FB{{< /formula >}} ist i. Allg. größer als <strong>70 Hz</strong>.</p>
<p>Eine wichtige Kenngröße bei der Verarbeitung von Video (und auch Grafik) im Rechner ist die Farbtiefe. Sie wird in
    <strong>Bit/Pixel</strong> angegeben und gibt an, dass {{< formula >}}2^{\text{Farbtiefe}}{{< /formula >}} Farben
    darstellbar sind.</p>
<p>Zur Darstellung der Farben wird eine <strong>Color Look Up Table (CLUT)</strong> verwendet. Dies ist eine Tabelle mit
    n Zeilen und drei Spalten mit {{< formula >}}m{{< /formula >}}-Bit pro Spalte, wobei
    {{< formula >}}n << m{{< /formula >}}. Pro Zeile ergibt sich für {{< formula >}}R{{< /formula >}},
    {{< formula >}}G{{< /formula >}} und {{< formula >}}B{{< /formula >}} mit jeweils {{< formula >}}m{{< /formula >}}
    Farbeinträgen ein Farbraum von {{< formula >}}2^{3m}{{< /formula >}} Farben. Zu einem Zeitpunkt sind n Farben aus
    einem Farbraum von {{< formula >}}2^{3m}{{< /formula >}} Farben darstellbar.</p><!--TODO: Formatierung-->

<p>Es gibt verschiedene de-facto Video-Standards, z.B.</p>
<ul>
    <li><strong>CGA</strong> Color Graphics Adapter<br/>
        Bildgröße: 320x200 Pixel<br/>
        Anzahl der verfügbaren Farben: 4<br/>
        Aufwand zur Darstellung eines Bildes:<br/>
        {{< formula >}} 320 \times 200 \text{Pixel} * 2\frac{\text{bit}}{\text{Pixel}} / 8 \frac{\text{bit}}{\text{Byte}} = 16000 {{< /formula >}}
    </li>
    <li><strong>EGA</strong> Enhanced Graphics Adapter<br/>
        Bildgröße: 640x350 Pixel<br/>
        Anzahl der verfügbaren Farben: 16<br/>
        Aufwand zur Darstellung eines Bildes:<br/>
        {{< formula >}} 640 \times 350 \text{Pixel} * 4\frac{\text{bit}}{\text{Pixel}} / 8 \frac{\text{bit}}{\text{Byte}} = 112000 {{< /formula >}}
    </li>
    <li><strong>VGA</strong> Video Graphics Array<br/>
        Bildgröße: 1024x768 Pixel<br/>
        Anzahl der verfügbaren Farben: 256<br/>
        Aufwand zur Darstellung eines Bildes:<br/>
        {{< formula >}} 640 \times 480 \text{Pixel} * 8\frac{\text{bit}}{\text{Pixel}} / 8 \frac{\text{bit}}{\text{Byte}} = 307200 {{< /formula >}}
    </li>
    <li><strong>SVGA</strong> Super Video Graphics Array<br/>
        Bildgröße: 1024x768 Pixel<br/>
        Anzahl der verfügbaren Farben: 256<br/>
        Aufwand zur Darstellung eines Bildes:<br/>
        {{< formula >}} 1024 \times 768 \text{Pixel} * 4\frac{\text{bit}}{\text{Pixel}} / 8 \frac{\text{bit}}{\text{Byte}} = 786432 {{< /formula >}}
    </li>
    <li><strong>XGA</strong> Extended Graphics Array<br/>
        Bildgröße: 640x480 Pixel<br/>
        Anzahl der verfügbaren Farben: 65536<br/>
        Aufwand zur Darstellung eines Bildes:<br/>
        {{< formula >}} 640 \times 480 \text{Pixel} * 16\frac{\text{bit}}{\text{Pixel}} / 8 \frac{\text{bit}}{\text{Byte}} = 6144000 {{< /formula >}}
    </li>
</ul><!--TODO: Formatierung-->

<h2>5.2.4 Datei-Format für Video-Daten: AVI</h2>
<p>
  AVI leitet sich ab von Audio-Video Interleaved. Interleaved bedeutet, dass
  Audio- und Videodaten in mehreren verschachtelten Einheiten, sogenannten
  Streams, gespeichert werden können
  <!--TODO: Fehlende Referenzen-->Seite 459ff.
</p>
<p>
  Das AVI Dateiformat ist eine spezielle, von Microsoft entwickelte Variante des
  RIFF (Resource Interchange File) Formates.
</p>
<p>
  RIFF-Dateien bilden Container, in dem Formate anderer Spezifikationen abgelegt
  werden. Sie dienen der Speicherung beliebiger Multimedia-Ressourcen und haben
  z.B. folgende Typenkennung:
</p>

<table class="table table-bordered">
  <tbody>
    <tr>
      <td>.AVI</td>

      <td>Video (Video for Windows)</td>
    </tr>

    <tr>
      <td>.WAV</td>

      <td>Audio Wave (Windows Wave File)</td>
    </tr>

    <tr>
      <td>.RDI</td>

      <td>Bitmap</td>
    </tr>

    <tr>
      <td>.RMI</td>

      <td>MIDI</td>
    </tr>

    <tr>
      <td>.BND</td>

      <td>Bündel anderer RIFF-Dateien</td>
    </tr>
  </tbody>
</table>

<p>
  Die einfachste Form einer AVI Datei stellt die Speicherung der Bildsequenzen
  eines Videos (video stream) dar. Meistens werden jedoch Audioinformationen mit
  gespeichert.
</p>
<p>
  Audio in Stereo-Qualität wird wie bei Mono-Ton in einem Stream gespeichert.
  Spezielle Multimedia-Sequenzen, z.B. ein MIDI-Track, stellen zusätzliche
  Datenstreams dar. Es sind Control-Tracks, z.B. zur externen Steuerung eines
  MCI-Videodisc-Players, möglich. Sie erfordern jedoch spezielle Software.
</p>
<p>
  Eine RIFF-Datei besteht aus einem Chunk (engl.: Klumpen, Block), der wiederum
  beliebig viele ineinander verschachtelte Subchunks (lokale Unterblöcke)
  enthalten kann. Der Aufbau eines (Sub)Chunks besteht aus drei Einträgen:
</p>
<p>
  Identifikator (ID): Kennzeichnet die Art der Daten bzw. des Blockes und wird
  als ASCII Zeichen (Character) interpretiert. Ein RIFF Chunk beginnt immer mit
  `RIFF`, d.h den Bytes 0x52, 0x49, 0x46 und 0x46.
</p>
<p>
  Länge (L): Die Daten haben eine bestimmte Länge. Chunks beginnen immer auf
  einer Wortgrenze; bei ungerader Länge wird ein Füllbyte angehängt.
</p>

<table class="table table-bordered">
  <tbody>
    <tr>
      <th>
        <div>Offset</div>
      </th>

      <th>
        <div>Bytes</div>
      </th>

      <th>
        <div>RIFF Header Struktur: Bedeutung</div>
      </th>
    </tr>

    <tr>
      <td>00H</td>

      <td>4</td>

      <td>Signatur 'RIFF'</td>
    </tr>

    <tr>
      <td>04H</td>

      <td>4</td>

      <td>Dateigröße in Byte</td>
    </tr>

    <tr>
      <td>08H</td>

      <td>4</td>

      <td>RIFF-Typ: String, z.B. 'AVI '</td>
    </tr>

    <tr>
      <td>...</td>

      <td>&nbsp;</td>

      <td>&nbsp;</td>
    </tr>
  </tbody>
</table>

<p><strong>AVI-Struktur</strong></p>
<p>
  Eine AVI-Datei beginnt mit dem RIFF-Header ('RIFF' xx xx xx xx 'AVI '), dem
  mehrere CHUNKs folgen. Dies ist zunächst ein LIST-CHUNK mit Informationen über
  die Datenkodierung (LIST CHUNK 'hdrl'), die von einem Chunk mit den
  eigentlichen Daten (LIST CHUNK 'movi') gefolgt wird. Hieran können sich
  weitere Sub-CHUNKs mit Daten anschließen. Tritt eine 'idx1'-Signatur auf, ist
  der Video-Datenbereich beendet und es folgen optionale Indexdefinitionen.
</p>
<p>Struktur einer AVI-Datei:</p>
<!--TODO: CODE SAMPLE-->

<p>AVI-Header-CHUNK</p>

<table class="table table-bordered">
  <tbody>
    <tr>
      <th>
        <div>Offset</div>
      </th>

      <th>
        <div>Bytes</div>
      </th>

      <th>
        <div>Bemerkungen</div>
      </th>
    </tr>

    <tr>
      <td>00H</td>

      <td>4</td>

      <td>CHUNK-Signatur ('LIST')</td>
    </tr>

    <tr>
      <td>04H</td>

      <td>4</td>

      <td>Länge des Sub-CHUNK</td>
    </tr>

    <tr>
      <td>08H</td>

      <td>4</td>

      <td>CHUNK-Typ ('hdrl')</td>
    </tr>

    <tr>
      <td>0CH</td>

      <td>n</td>

      <td>Sub-CHUNKs</td>
    </tr>
  </tbody>
</table>

<p>Eine 'hdrl' Liste besteht aus zwei Subchunks:</p>
<ul>
  <li>
    Der erste (ID 'avih') definiert globale Eigenschaften der AVI-Datei, z.B.
    enthält der <strong>avih</strong>
    Sub-CHUNK folgende globale Daten:
      <table class="table table-bordered">
          <tbody>
          <tr>
              <th>
                  <div>Offset</div>
              </th>

              <th>
                  <div>Bytes</div>
              </th>

              <th>
                  <div>Bemerkungen</div>
              </th>
          </tr>

          <tr>
              <td>00H</td>

              <td>4</td>

              <td>Signatur ('avih')</td>
          </tr>

          <tr>
              <td>04H</td>

              <td>4</td>

              <td>CHUNK-Länge</td>
          </tr>

          <tr>
              <td>08H</td>

              <td>4</td>

              <td>Time Delay zwischen Frames</td>
          </tr>

          <tr>
              <td>0CH</td>

              <td>4</td>

              <td>AVI Datenrate</td>
          </tr>

          <tr>
              <td>10H</td>

              <td>4</td>

              <td>reserved</td>
          </tr>

          <tr>
              <td>14H</td>

              <td>4</td>

              <td>Flags</td>
          </tr>

          <tr>
              <td>18H</td>

              <td>4</td>

              <td>Zahl der Frames</td>
          </tr>

          <tr>
              <td>1CH</td>

              <td>4</td>

              <td>Initial Frames</td>
          </tr>

          <tr>
              <td>20H</td>

              <td>4</td>

              <td>Zahl der Data-Streams</td>
          </tr>

          <tr>
              <td>24H</td>

              <td>4</td>

              <td>Größe des Playback Buffers</td>
          </tr>

          <tr>
              <td>28H</td>

              <td>4</td>

              <td>Video Frame Width in Pixel</td>
          </tr>

          <tr>
              <td>2CH</td>

              <td>4</td>

              <td>Video Frame Height in Pixel</td>
          </tr>

          <tr>
              <td>30H</td>

              <td>4</td>

              <td>Unit Time Scale</td>
          </tr>

          <tr>
              <td>34H</td>

              <td>4</td>

              <td>Playback Datenrate</td>
          </tr>

          <tr>
              <td>38H</td>

              <td>4</td>

              <td>Start-Zeit</td>
          </tr>

          <tr>
              <td>3CH</td>

              <td>4</td>

              <td>AVI Daten CHUNK Größe</td>
          </tr>
          </tbody>
      </table>
  </li>
  <li>
    Der zweite ist ein LIST-Chunk mit dem Type 'strl' (Stream List), der für
    jeden Stream mindestens zwei Chunks enthält:
    <ul>
      <li>'strh' (Stream Header) und</li>
      <li>'strf' (Stream Format) Chunk.</li>
      <li>
        <strong>'strd'-Chunk</strong> (Stream Data) kann optional folgen. Dient
        der Speicherung zusätzlicher Daten, kann z.B. bei installierbarem (De-/)
        Komprimierer den Initialisierungswert enthalten.
      </li>
      <li>
        <strong>'strh'-Chunk:</strong>Speichert Informationen zum Stream, z.B.
        um welche Art von Daten (Bild oder Ton) es sich handelt, welcher
        Kompressor benutzt oder mit welcher Rate digitalisiert wurde:
          <table class="table table-bordered">
              <tbody>
              <tr>
                  <th>
                      <div>Offset</div>
                  </th>

                  <th>
                      <div>Bytes</div>
                  </th>

                  <th>
                      <div>Bemerkungen</div>
                  </th>
              </tr>

              <tr>
                  <td>00H</td>

                  <td>4</td>

                  <td>Signatur ('strh')</td>
              </tr>

              <tr>
                  <td>04H</td>

                  <td>4</td>

                  <td>Länge Sub-CHUNK (38H)</td>
              </tr>

              <tr>
                  <td>08H</td>

                  <td>4</td>

                  <td>Typ: 'vids' / 'auds' (video / audio stream)</td>
              </tr>

              <tr>
                  <td>0CH</td>

                  <td>4</td>

                  <td>Handler: z.B. 'msvc' (für De- / Kompression)</td>
              </tr>

              <tr>
                  <td>10H</td>

                  <td>4</td>

                  <td>Flags</td>
              </tr>

              <tr>
                  <td>14H</td>

                  <td>4</td>

                  <td>Reserviert</td>
              </tr>

              <tr>
                  <td>18H</td>

                  <td>4</td>

                  <td>
                      Frames, vor Initial Frame (nur für Interleaved AVI-Files)
                  </td>
              </tr>

              <tr>
                  <td>1CH</td>

                  <td>4</td>

                  <td>Scale: Zeiteinheit für Wiedergabe</td>
              </tr>

              <tr>
                  <td>20H</td>

                  <td>4</td>

                  <td>Rate</td>
              </tr>

              <tr>
                  <td>24H</td>

                  <td>4</td>

                  <td>Start</td>
              </tr>

              <tr>
                  <td>28H</td>

                  <td>4</td>

                  <td>Length</td>
              </tr>

              <tr>
                  <td>2CH</td>

                  <td>4</td>

                  <td>Buffer Size</td>
              </tr>

              <tr>
                  <td>30H</td>

                  <td>4</td>

                  <td>Qualität, die beim Encoding benutzt werden soll</td>
              </tr>

              <tr>
                  <td>34H</td>

                  <td>4</td>

                  <td>Sample Size: Größe eines einzelnen Bildes</td>
              </tr>
              </tbody>
          </table>
      </li>
    </ul>
  </li>
  <li>
    'strf'-Chunk: Speichert das genaue Format des Streams. Für Audio enthält der
    'strf'-Chunk z.B. den Typ WAVEFORMATEX, eine Erweiterung des Typs
    WAVEFORMAT, in der unter Windows PCM Waveform-Daten gespeichert werden. Für
    Video-Daten gilt z.B.
      <table class="table table-bordered">
          <tbody>
          <tr>
              <th>
                  <div>Offset</div>
              </th>

              <th>
                  <div>Bytes</div>
              </th>

              <th>
                  <div>Bemerkungen</div>
              </th>
          </tr>

          <tr>
              <td>00H</td>

              <td>4</td>

              <td>Header Size</td>
          </tr>

          <tr>
              <td>04H</td>

              <td>4</td>

              <td>Bildbreite in Pixel</td>
          </tr>

          <tr>
              <td>08H</td>

              <td>4</td>

              <td>Bildhöhe in Pixel</td>
          </tr>

          <tr>
              <td>0CH</td>

              <td>2</td>

              <td>Zahl der Planes (Farbebenen)</td>
          </tr>

          <tr>
              <td>0EH</td>

              <td>2</td>

              <td>Bits per Pixel</td>
          </tr>

          <tr>
              <td>10H</td>

              <td>4</td>

              <td>Kompression: 0 = RGB unkomprim., 1 = RLE8, 2 = RLE4</td>
          </tr>

          <tr>
              <td>14H</td>

              <td>4</td>

              <td>Bildgröße in Byte</td>
          </tr>

          <tr>
              <td>18H</td>

              <td>4</td>

              <td>x Pels (Pictur Elements) / Meter: horizontale Aufl.</td>
          </tr>

          <tr>
              <td>1CH</td>

              <td>4</td>

              <td>Y Pels per Meter: vertikale Auflösung</td>
          </tr>

          <tr>
              <td>20H</td>

              <td>4</td>

              <td>Colors used: Zahl der benutzen Farben</td>
          </tr>

          <tr>
              <td>24H</td>

              <td>4</td>

              <td>Colors Important</td>
          </tr>

          <tr>
              <td>28H</td>

              <td>4 n</td>

              <td>RGB-Quad Struktur: blau, grün, rot, reserv</td>
          </tr>
          </tbody>
      </table>
  </li>
  <li>
    Die der 'strl'-Liste folgenden Chunks in der 'hdrl' Liste sind nicht genauer
    spezifiziert. Hier steht üblicherweise ein 'JUNK'-Chunk, dessen Länge so
    gewählt werden kann, dass die Bild- bzw. Tondaten mit einem Vielfachen von 2
    KByte beginnen.
  </li>
</ul>
<!--TODO: Formatierung-->

<p>
  Nach dem Header folgen im 'movi'-Chunk die eigentlichen Bild- und Tondaten.
  Diese können Stream für Stream als Subchunks der 'movi'-Liste oder aber
  ineinander verschachtelt gespeichert sein. Im ersten Fall existiert pro Stream
  ein Subchunk, im zweiten Fall pro Schachtelung ein LIST-Chunk mit dem Form Typ
  'rec '. Die 'movi'-Liste speichert dann die (evtl. komprimierten) Daten für
  die einzelnen Bilder des Videos, sowie die Audio-Sequenz.
</p>
<p>
  <strong>'idx1' Chunk</strong>: Kann den eigentlichen Daten folgen. In diesem
  wird eine Liste der verschiedenen Daten Chunks mit deren Lokation
  festgehalten. Dies ermöglicht der Wiedergabesoftware aus dem AVI-File einzelne
  Chunks abzuspielen, ohne die Datei langwierig zu durchsuchen.
</p>
