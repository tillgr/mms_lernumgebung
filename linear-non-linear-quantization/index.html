<!DOCTYPE html>
<html lang="de">
    <head>
        <link rel="stylesheet" href="style.css">
        <title>Quantisierung und Digitalisierung von Audiosignalen</title>
        <script src="bootstrap/compiled/bootstrap.bundle.min.js" charset="utf-8"></script>
    </head>
    <body>
        <div>
            <header class="header">
                <h1 class="title1">Quantisierung & Digitalisierung </h2>
                <h3 class="title2">von Audiosignalen</h3>
            </header>
        </div>

        <div class="sidenav">
            <a id="sidebarIntroduction" onclick="btnIntroduction()" href="#" class="sidebar">&#8226 Einführung</a>
            <a id="sidebarResolution" onclick="btnResolution()" href="#" class="sidebar">&#8226 Auflösung</a>
            <a id="placeholderResolution" class="placeholder">&#8226 Auflösung</a>
            <a id="sidebarSamplingFrequency" onclick="btnResolution()" href="#" class="sidebar">&nbsp - Abtast- &nbsp&nbspfrequenz</a>
            <a id="placeholderSamplingFrequency" class="placeholder">&nbsp - Abtast- &nbsp&nbspfrequenz</a>
            <a id="sidebarStoragefrequency" onclick="btnStoragefrequency()" href="#" class="sidebar">&nbsp - Speicher- &nbsp&nbspfrequenz</a>
            <a id="placeholderStoragefrequency" class="placeholder">&nbsp - Speicher- &nbsp&nbspfrequenz</a>
            <a href="#" class="sidebar" id="sidebarLinear" onclick="btnContinueLinear()">&#8226 Lineare Quantisierung</a>
            <a id="placeholderLinear" class="placeholder">&#8226 Lineare Quantisierung</a>
            <a href="#" class="sidebar" id="sidebarNonlinear" onclick="btnContinueNonLinear()">&#8226 Nichtlineare Quantisierung</a>
            <a id="placeholderNonlinear" class="placeholder">&#8226 Nichtlineare Quantisierung</a>
            <a href="#" class="sidebar" id="sidebarEvaluation" onclick="btnContinueEvaluation()">&#8226 Auswertung</a>
            <a id="placeholderEvaluation" class="placeholder" >&#8226 Auswertung</a>
        </div>
        <div id="intro">
            <p class="txtIntro">Bei der Digitalisierung werden zeit-
                und wertkontinuierliche Audiosignale in eine
                zeit- und wertdiskrete Folge umgewandelt.
                Die Quantisierung besteht in der
                Darstellung der Messwerte mit endlicher
                Auflösung, indem sie auf ganzzahlige
                Binärwerte abgebildet werden.
                In dieser Übung sollen die relevanten
                Schritte der Quantisierung durchlaufen
                werden, um die Unterschiede der linearen
                und nichtlinearen Vorgehensweise zu erkennen.</p>
                <button class="btnSkipIntro btn btn-secondary" onclick="btnSkipIntro()">Einführung überspringen</button>
                <button class="btnStart btn btn-primary" onclick="btnResolution()">Start</button>
        </div>

        <div id="resolution1">
            <p class="taskResolution1">Ein analoges Audiosignal mit einer Grenzfrequenz von
                <span id="limitFrequency"></span>
                Hz soll abgetastet und digitalisiert werden.
                Welche Abtastfrequenz muss für eine eindeutige Rekonstruktion
                des Signals aus den digitalen Daten vorliegen?</p>
            <div class="formResolution1">
              <form class="inputFieldResolution1" name="inputFieldResolution1" action="index.html" method="post">
                  <label for="samplingFrequency">Abtastfrequenz:</label>
                  <input type="number" name="samplingFrequency"> Hz
              </form>
              <button class="btnShowCorrectAnswer btn btn-secondary" onclick="btnShowCorrectAnswerResolution1()">Lösung</button>
            </div>
            <div class="errorMessage">
                <p id="errorMessageResolution1_1" class="wrongAnswer">Nur Zahlen eingeben!</p>
                <p id="errorMessageResolution1_2" class="wrongAnswer"><span id="inputSamplingFrequency"></span> Hz ist Falsch! Bitte beachte das Shannon Theorem!</p>
            </div>
            <p id="answerIsCorrectSampling">Richtig!<p>
            <p id="answerExplanationResolution1_1">Das Shannon Abtasttheorem sagt aus, dass zur eindeutigen Rekonstruktion eines Signales
                  die Abtastrate mindestens das Doppelte der höchsten im Originalsignal enthaltenen
                  Frequenz(Grenzfrequenz) betragen muss.</p>
            <p id="answerExplanationResolution1_2">Also: 2 x <span id="answerLimitFrequency"></span>
                  Hz = <span id="answerSamplingFrequency"></span> Hz</p>

            <button class="btnsamplingFrequency btn btn-primary" onclick="btnCheckAnswer()">Weiter</button>
            <button class="btnsamplingFrequency2 btn btn-primary" onclick="btnStoragefrequency()">Weiter</button>
        </div>
        <div id="resolution2">
            <div id="Storage_task">
                <p class="taskResolution2">Ein analoges Audiosignal der Länge
                    <span class="boldType"><span id="limitSeconds"></span> s</span>
                     soll mit einer Frequenz von <span class="boldType">44 Khz</span> abgetastet werden.
                    <br><br>Dabei soll der Speicherbedarf <span class="boldType"><span id="limitStorage"></span> Kbyte</span> nicht überschreiten.
                    <br><br>Mit wieviel Bit kann maximal quantisiert werden?
                </p>
                <div class="formResolution2">
                    <input type="number" id="storageAnswer"> bit
                </div>
                <button id="btnShowCorrectAnswerStorage" class="btnShowCorrectAnswerStorage btn btn-secondary" onclick="btnShowCorrectAnswerResolution2()">Lösung</button>
                <div class="errorMessage">
                    <p id="errorMessageResolution2_1" class="wrongAnswer">Nur Zahlen eingeben!</p>
                    <p id="errorMessageResolution2_2" class="wrongAnswer"><span id="storageInput"></span> bit ist Falsch! Bitte überprüfe deine Rechnung!</p>
                </div>
            </div>
            <div id="answerIsCorrectStorage" class="boldType">Richtig!</div>
            <div id="answerExplanationStorage">
                <p>
                    Das Audiosignal wird <span class="boldType">44000 mal</span> in der Sekunde abgetastet,
                    es ist <span class="boldType"><span id="secondsCorrect"></span> s</span> lang. Daraus ergeben
                    sich <span class="boldType">44000 1/s * <span id="secondsCorrect2"></span> s = <span id="samples"></span>
                    Abtastwerte</span>.
                     <br><br>
                     Es stehen <span class="boldType"><span id="storage"></span> KByte</span> zur Verfügung. Das sind
                     <span class="boldType"><span id="storage2"></span> * 1024 = <span id="storage3_Byte"></span> Byte</span>,
                     was wiederum <span class="boldType"><span id="storage3_Byte2"></span> * 8 = <span id="storage4_Bit"></span>
                     bit</span> sind.<br><br>
                     Wenn es für <span class="boldType"><span id="samples2"></span> Abstastwerte <span id="storage4_Bit2"></span>
                     bit</span> zur Verfügung stehen, dann kann jeder Wert mit maximal <span class="boldType"><span id="storage4_Bit3"></span>
                     / <span id="samples3"></span> = <span id="answerStorage"></span> bit</span> gespeichert werden.
                </p>
            </div>

            <button class="btnContinueStorage btn btn-primary" onclick="btnCheckAnswerStorage()">Weiter</button>
            <button class="btnContinueLinear btn btn-primary" onclick="btnContinueLinear()">Weiter</button>

        </div>
        <div id="linearQuantisation">
          <div id="linearTask" class="linearTask">
            <p class="marginTop" id="linearText1">Bei der linearen Quantisierung ist das Raster linear eingeteilt.</p>

            <p id="linearText2">Bitte klicke auf die Punkte des Rasters um das Signal abzutasten
                und zu quantisieren.
                Beachte dabei, dass ein absoluter Fehler >15 darauf hinweist,
                dass du den falschen Rasterpunkt gewählt hast.</p>
            <p id="linearErrorMessage">Du hast entweder nicht die alle Punkte oder einige falsch gesezt!</p>

            <button id="btnCheckLinear" class="btnBeginLinearQuantisation btn btn-primary" onclick="btnCheckLinear()">Quantisieren!</button>
            <button id="btnShowCorrectAnswerLinear" class="btn btn-primary" onclick="btnShowCorrectAnswerLinear()">Lösung</button>
          </div>
          <div id="linearTaskEnd" class="linearTaskEnd">
            <p class="marginTop">Es fällt auf, dass der absolute Fehler im wesentlichen konstant bleibt.</p>

            <p>Der relative Fehler gibt das Verhältnis der Abweichung zum
              Signalwert an und ist ein Maß für das Rauschen. Dabei sieht man,
              dass speziell für kleine Signalwerte der relative Fehler recht groß wird
              und somit das Rauschen das Signal an diesen Stellen überdecken kann.
            </p>
            <button id="btnBeginNonLinear" class="linearButtonContinue btn btn-primary" onclick="btnContinueNonLinear()">Auswertung</button>
          </div>

          <div id="linearFormDiagram">
            <table class="linearTable">
              <tr>
                <th colspan="11">Abweichung absolut</th>
              </tr>
              <tr>
                <td id="linearAbsolute0"></td>
                <td id="linearAbsolute0.02"></td>
                <td id="linearAbsolute0.04"></td>
                <td id="linearAbsolute0.06"></td>
                <td id="linearAbsolute0.08"></td>
                <td id="linearAbsolute0.09"></td>
                <td id="linearAbsolute0.1"></td>
                <td id="linearAbsolute0.12"></td>
                <td id="linearAbsolute0.14"></td>
                <td id="linearAbsolute0.16"></td>
                <td id="linearAbsolute0.18"></td>
              </tr>
            </table>
            <table class="linearTable">
              <tr>
                <th colspan="11">Abweichung relativ</th>
              </tr>
              <tr>
                <td id="linearRelative0"></td>
                <td id="linearRelative0.02"></td>
                <td id="linearRelative0.04"></td>
                <td id="linearRelative0.04"></td>
                <td id="linearRelative0.06"></td>
                <td id="linearRelative0.08"></td>
                <td id="linearRelative0.1"></td>
                <td id="linearRelative0.12"></td>
                <td id="linearRelative0.14"></td>
                <td id="linearRelative0.16"></td>
                <td id="linearRelative0.18"></td>
              </tr>
            </table>
            <div class="container">
              <svg id="linearSVG" width="100%" height="100%"></svg>
              </svg>

            </div>

          </div>

        </div>
        <div id="nonlinearQuantisation">
          <div id="nonlinearTask" class="nonlinearTask">
            <p class="marginTop" id="nonlinearText1">Bei der nichtlinearen Quantisierung ist das Raster logarithmisch eingeteilt.</p>
            <p id="nonlinearText2">Bitte klicke auf die Punkte des Rasters um das Signal abzutasten
                und zu quantisieren.
                Beachte dabei, dass ein absoluter Fehler >halbes Intervall darauf hinweist,
                dass du den falschen Rasterpunkt gewählt hast.</p>
            <p id="nonlinearErrorMessage">Du hast entweder nicht die alle Punkte oder einige falsch gesezt!</p>
            <button class="btnBeginLinearQuantisation btn btn-primary" onclick="">Quantisieren!</button>
            <button id="btnShowCorrectAnswerNoninear" class="btn btn-primary" onclick="btnShowCorrectAnswerNoninear()">Lösung</button>
          </div>

          <div id="nonlinearTaskEnd" class="nonlinearTaskEnd">
            <p class="marginTop">Es fällt auf, dass im Gegensatz zur linearen Quantisierung die kleinen Signalwerte durch das
                logarithmische Raster wesentlich genauer quantisiert werden. Dadurch verringert sich der relative Fehler
                für diese Werte erheblich.</p>

            <p>Das Rauschen kann diese Signalabschnitte also nicht mehr überdecken.</p>
            <p>Um einen vergleich deiner durchgeführten linearen & nichtlinearen Quantisierung anzusehen, klicke bitte auf "Auswertung".</p>
            <button id="btnBeginNonLinear" class="linearButtonContinue btn btn-primary" onclick="btnContinueNonLinear()">Weiter</button>
          </div>

          <div id="linearFormDiagram">
            <table class="linearTable">
              <tr>
                <th colspan="11">Abweichung absolut</th>
              </tr>
              <tr>
                <td id="linearAbsolute0"></td>
                <td id="linearAbsolute1"></td>
                <td id="linearAbsolute2"></td>
                <td id="linearAbsolute3"></td>
                <td id="linearAbsolute4"></td>
                <td id="linearAbsolute5"></td>
                <td id="linearAbsolute6"></td>
                <td id="linearAbsolute7"></td>
                <td id="linearAbsolute8"></td>
                <td id="linearAbsolute9"></td>
              </tr>
            </table>
            <table class="linearTable">
              <tr>
                <th colspan="11">Abweichung relativ</th>
              </tr>
              <tr>
                <td id="linearRelative0"></td>
                <td id="linearRelative1"></td>
                <td id="linearRelative2"></td>
                <td id="linearRelative3"></td>
                <td id="linearRelative4"></td>
                <td id="linearRelative5"></td>
                <td id="linearRelative6"></td>
                <td id="linearRelative7"></td>
                <td id="linearRelative8"></td>
                <td id="linearRelative9"></td>
              </tr>
            </table>
            <div class="container">
              <svg id="nonlinear" width="100%" height="100%"></svg>
              </svg>
            </div>

          </div>

        </div>
        <div id="evaluation">
          <div id="linearTask" class="linearTask">
            <p class="marginTop" id="linearText1">In der Gegenüberstellung der roten linearen und der blauen nichtlinearen
              Quantisierungskurve wird deutlich, dass der relative Fehler (Maß für das Rauschen) für kleine Signalwerte
              durch die nichtlineare Quantisierung minimiert werden kann.
            </p>
            <button id="btnRestart" class="btnBeginLinearQuantisation btn btn-primary" onclick="btnStartAgain()">Neustart</button>
          </div>
          <div id="linearFormDiagram">
            <table class="linearTable">
              <tr>
                <th colspan="11">Abweichung relativ - <span id="redLinear">lineare Quantisierung</span></th>
                <th>&#216</th>
              </tr>
              <tr>
                <td id="Linear0"></td>
                <td id="Linear0.02"></td>
                <td id="Linear0.04"></td>
                <td id="Linear0.06"></td>
                <td id="Linear0.08"></td>
                <td id="Linear0.09"></td>
                <td id="Linear0.1"></td>
                <td id="Linear0.12"></td>
                <td id="Linear0.14"></td>
                <td id="Linear0.16"></td>
                <td id="Linear0.18"></td>
                <td id="averageLinear"></td>
              </tr>
            </table>
            <table class="linearTable">
              <tr>
                <th colspan="11">Abweichung relativ - <span id="blueNonlinear">nichtlineare Quantisierung</span></th>
                <th>&#216</th>
              </tr>
              <tr>
                <td id="Nonlinear0"></td>
                <td id="Nonlinear0.02"></td>
                <td id="Nonlinear0.04"></td>
                <td id="Nonlinear0.04"></td>
                <td id="Nonlinear0.06"></td>
                <td id="Nonlinear0.08"></td>
                <td id="Nonlinear0.1"></td>
                <td id="Nonlinear0.12"></td>
                <td id="Nonlinear0.14"></td>
                <td id="Nonlinear0.16"></td>
                <td id="Nonlinear0.18"></td>
                <td id="averageNonlinear"></td>
              </tr>
            </table>
            <div class="container">
              <svg width="100%" height="100%" id="elavuationDiagram"></svg>

            </div>

          </div>

        </div>
        <script src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script>
        <script src="script.js"></script>
    </body>
</html>
